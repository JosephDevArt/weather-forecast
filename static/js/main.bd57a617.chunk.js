(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],{14:function(e,t,n){e.exports=n(27)},25:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),s=n(1),o=(n(25),function(e){var t=e.isFetching;return r.a.createElement("div",{style:{display:t?"":"none"},className:"loading"},r.a.createElement("div",null,r.a.createElement("div",{className:"c1"}),r.a.createElement("div",{className:"c2"}),r.a.createElement("div",{className:"c3"}),r.a.createElement("div",{className:"c4"})),r.a.createElement("span",null,"loading"))}),u=n(3),l=n.n(u),m=n(4),d=function(e){return{type:"LOAD_WEATHER_SECCESS",payload:e}},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){var e=Object(m.a)(l.a.mark((function e(n,a){var r,c,i,o,u,m,p,h,E,b,g,O,w;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a().units.isChecked,c=a().app.errorMessage,i=a().app.isGeoProvided,o="4d96cdf290adaa3b042770b44f98ee42",n(f(!0)),1!=t.length){e.next=12;break}return m=t[0],e.next=9,fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(m,"&appid=").concat(o,"&units=").concat(r?"imperial":"metric"));case 9:u=e.sent,e.next=17;break;case 12:return p=t[0],h=t[1],e.next=16,fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(p,"&lon=").concat(h,"&appid=").concat(o,"&units=").concat(r?"imperial":"metric"));case 16:u=e.sent;case 17:if(!u.ok){e.next=25;break}return e.next=20,u.json();case 20:E=e.sent,b={city:E.city,weather:E.list},Object(s.b)((function(){!i&&n(v(!0)),n(d(b)),n(f(!1)),c&&n(y(""))})),e.next=27;break;case 25:throw Object(s.b)((function(){n(f(!1)),n(y(u.statusText))})),Error;case 27:return g=E.city.coord,O=g.lat,w=g.lon,e.abrupt("return",[O,w]);case 29:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},h=function(e,t){return function(){var n=Object(m.a)(l.a.mark((function n(a,r){var c,i,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().app.isInitialized,a(f(!0)),"D2A7A53KAY86",n.next=5,fetch("https://api.timezonedb.com/v2.1/get-time-zone?key=".concat("D2A7A53KAY86","&format=json&by=position&lat=").concat(e,"&lng=").concat(t));case 5:return i=n.sent,n.next=8,i.json();case 8:s=n.sent,a({type:"LOAD_TIME_SUCCESS",time:s.formatted}),a(f(!1)),!c&&a(E(!0));case 12:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},E=function(e){return{type:"SET_IS_INITIALIZED",payload:e}},f=function(e){return{type:"SET_IS_FETCHING",payload:e}},y=function(e){return{type:"SET_ERROR_MESSAGE",error:e}},v=function(e){return{type:"SET_IS_GEOLOCATION_PROVIDED",payload:e}},b=function(){var e=Object(s.e)((function(e){return{city:e.location.city,country:e.location.country,day:e.time.day,month:e.time.month,year:e.time.year,date:e.time.date,time:e.time.time,temp:Math.round(e.weather.currentWeather.main.temp),icon:e.weather.currentWeather.weather[0].icon,description:e.weather.currentWeather.weather[0].description,isChecked:e.units.isChecked}})),t=e.city,n=e.country,a=e.day,c=e.month,i=e.date,o=e.year,u=e.time,l=e.temp,m=e.icon,d=e.description,p=e.isChecked;return r.a.createElement("div",{className:"current"},r.a.createElement("h1",null,t,", ",n),r.a.createElement("p",null,u," ",a,", ",i," ",c," ",o),r.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(m,"@4x.png"),alt:""}),r.a.createElement("h2",null,d),r.a.createElement("h3",null,l," ",r.a.createElement("span",null," ",p?"\u2109":"\u2103")))},g=function(){var e=Object(a.useRef)(null),t=Object(s.d)(),n=Object(s.e)((function(e){return{isFetching:e.app.isFetching,errorMessage:e.app.errorMessage}})),c=n.isFetching,i=n.errorMessage;return r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var a,r=e.current;t((a=null===r||void 0===r?void 0:r.value,function(){var e=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(p(a));case 2:return n=e.sent,e.next=5,t(h(n[0],n[1]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},action:""},r.a.createElement("input",{ref:e,type:"text",placeholder:"city"}),r.a.createElement("p",null,i),r.a.createElement("button",{disabled:c,type:"submit"},"Search"))},O=function(e){var t=e.time,n=e.temp,a=e.icon,c=e.isChecked;return r.a.createElement("div",{className:"time-stamp"},r.a.createElement("div",{className:"temp-at-specific-hour"},r.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(a,"@4x.png"),alt:""}),r.a.createElement("p",null,n,c?"\u2109":"\u2103")),r.a.createElement("span",null,t))},w=function(){var e=Object(s.e)((function(e){return{timeLine:e.weather.timeLine,isChecked:e.units.isChecked}}),s.c),t=e.timeLine,n=e.isChecked;return r.a.createElement("div",{className:"cont"},r.a.createElement("div",{className:"time-line"},t.map((function(e,t){return r.a.createElement(O,Object.assign({key:t,isChecked:n},e))}))))},j=function(){return r.a.createElement("div",{className:"main-info"},r.a.createElement(g,null),r.a.createElement(b,null),r.a.createElement(w,null))},S=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.location.city}));return r.a.createElement("div",{className:"temp-units"},r.a.createElement("p",null,"Weather forecast"),r.a.createElement("div",{className:"toggle"},r.a.createElement("input",{onChange:function(){Object(s.b)((function(){e({type:"SET_IS_CHECKED"}),e(p(t))}))},type:"checkbox"}),r.a.createElement("label",{htmlFor:""},"\u2103"),r.a.createElement("label",{htmlFor:""},"\u2109")))},_=n(6),C=function(e){var t=e.text,n=e.value;return r.a.createElement("li",null,t,": ",r.a.createElement("span",null,n))},k=function(){var e=Object(s.e)((function(e){var t;return t={humidity:e.weather.currentWeather.main.humidity,pressure:e.weather.currentWeather.main.pressure},Object(_.a)(t,"sea level",e.weather.currentWeather.main.sea_level),Object(_.a)(t,"wind speed",e.weather.currentWeather.wind.speed),Object(_.a)(t,"sunrise",e.time.sunrise),Object(_.a)(t,"sunset",e.time.sunset),t}),s.c);return r.a.createElement("div",{className:"weather-details"},r.a.createElement("h4",null,"Weather details"),r.a.createElement("ul",null,Object.keys(e).map((function(t,n){return r.a.createElement(C,{key:n,text:t,value:e[t]})}))))},x=function(e){var t=e.day,n=e.temp,a=e.isChecked;return r.a.createElement("li",null,t,r.a.createElement("span",null,n," ",a?"\u2109":"\u2103"))},I=function(){var e=Object(s.e)((function(e){return{nextDays:e.weather.nextDays,isChecked:e.units.isChecked}}),s.c),t=e.nextDays,n=e.isChecked;return r.a.createElement("div",{className:"next-days-forecast"},r.a.createElement("h4",null,"Next days"),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement(x,Object.assign({key:t,isChecked:n},e))}))))},D=function(){return r.a.createElement("aside",{className:"side-bar"},r.a.createElement(k,null),r.a.createElement(I,null))},T=function(){var e=Object(s.e)((function(e){return{isInitialized:e.app.isInitialized,isFetching:e.app.isFetching,isGeoProvided:e.app.isGeoProvided}})),t=e.isInitialized,n=e.isFetching,c=e.isGeoProvided,i=Object(s.d)();return Object(a.useEffect)((function(){i(function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("initialization"),navigator.geolocation.getCurrentPosition((function(e){console.log("success"),t(v(!0));var n=e.coords.latitude,a=e.coords.longitude,r=t(p(n,a)),c=t(h(n,a));Promise.all([r,c]).then((function(){t(E(!0))}))}),(function(e){t(v(!1)),console.log("failed")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c?t?r.a.createElement("main",{className:"App"},r.a.createElement(o,{isFetching:n}),r.a.createElement(j,null),r.a.createElement(S,null),r.a.createElement(D,null)):r.a.createElement(o,{isFetching:n}):r.a.createElement(g,null)},A=n(5),N=n(13),F=n(2),M={isInitialized:!1,isFetching:!1,errorMessage:"",isGeoProvided:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_INITIALIZED":return Object(F.a)(Object(F.a)({},e),{},{isInitialized:!0});case"SET_IS_FETCHING":return Object(F.a)(Object(F.a)({},e),{},{isFetching:t.payload});case"SET_ERROR_MESSAGE":return Object(F.a)(Object(F.a)({},e),{},{errorMessage:t.error});case"SET_IS_GEOLOCATION_PROVIDED":return Object(F.a)(Object(F.a)({},e),{},{isGeoProvided:t.payload});default:return e}},L=function(e){var t=new Date(1e3*e);return console.log(t),2!=t.getMinutes().toString().length?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()},R=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e.dt_txt.slice(0,10))||(t[e.dt_txt.slice(0,10)]=new Object),t[e.dt_txt.slice(0,10)][e.dt_txt.slice(11)]={temp:e.main.temp,icon:e.weather[0].icon}})),t},G=function(e){e=R(e);var t=[],n=0;for(var a in e)for(var r in e[a]){if(9==n)break;n++,t.push({time:r.slice(0,5),temp:Math.round(e[a][r].temp),icon:e[a][r].icon})}return t},P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],H=function(e){e=R(e);var t=[];for(var n in e){var a=new Date(n),r=P[a.getDay()],c=0,i=0;for(var s in e[n])c+=e[n][s].temp,i+=1;t.push({day:r,temp:Math.round(c/i)})}return t},z={currentWeather:{dt_txt:"",main:{humidity:0,pressure:0,sea_level:0,temp:0},weather:[{description:"",icon:"",main:""}],wind:{speed:0}},timeLine:[],nextDays:[],isFetching:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_WEATHER_SECCESS":var n=G(t.payload.weather),a=H(t.payload.weather);return Object(F.a)(Object(F.a)({},e),{},{currentWeather:t.payload.weather[0],timeLine:n,nextDays:a});default:return e}},J={day:"",month:"",date:"",year:"",time:"",sunrise:"",sunset:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TIME_SUCCESS":var n=new Date(t.time.replace(/ /g,"T")),a=n.toDateString().split(" "),r=t.time.slice(11,16);return Object(F.a)(Object(F.a)({},e),{},{day:a[0],month:a[1],date:a[2],year:a[3],time:r});case"LOAD_WEATHER_SECCESS":var c=L(t.payload.city.sunrise),i=L(t.payload.city.sunset);return Object(F.a)(Object(F.a)({},e),{},{sunrise:c,sunset:i});default:return e}},V={isChecked:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_CHECKED":return{isChecked:!e.isChecked};default:return e}},Z={country:"",city:""},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_WEATHER_SECCESS":var n=t.payload.city,a=n.name,r=n.country;return{country:r,city:a};default:return e}},B=Object(A.c)({app:W,location:q,weather:K,time:U,units:Y}),Q=Object(A.e)(B,Object(A.d)(Object(A.a)(N.a)));i.a.render(r.a.createElement(s.a,{store:Q},r.a.createElement(T,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.bd57a617.chunk.js.map